(()=>{"use strict";var e={26:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.InsertMediaBase=void 0;var n=function(){function e(e){this.postMessageCallbackReceived=!1,this.pingOn=!1,this.readConfig(e)}return e.prototype.messageEvent=function(e){this.messageReceiver(e)},e.prototype.readConfig=function(e){var t=null;if(null==e.origin){var n=document.createElement("a");n.href=e.imageVaultUiUrl,e.origin=n.protocol+"//"+n.hostname,n.port&&(/http:/i.test(n.protocol)&&"80"!==n.port||/https:/i.test(n.protocol)&&"443"!==n.port)&&(e.origin+=":"+n.port)}if(e.publishingSource||(t="Publish source must be configured"),null!=t&&e.error)e.error(null,t);else if(null!=t)throw t;this.config=e},e.prototype.setupCallback=function(){var e=this;if(this.postMessageCallbackReceived)return!0;if(this.containerWindow.postMessage){try{this.containerWindow.postMessage("init",this.config.origin)}catch(e){}setTimeout((function(){e.setupCallback()}),1e3)}return!1},e.prototype.ping=function(){var e=this;if(this.pingOn){if(this.containerWindow.postMessage)try{this.containerWindow.postMessage("ping",this.config.origin)}catch(e){}setTimeout((function(){e.ping()}),1e3)}},e.prototype.messageReceiver=function(e){var t=this;if(e.origin===this.config.origin){if("initReceived"===e.data)return this.postMessageCallbackReceived=!0,this.pingOn=!0,setTimeout((function(){t.ping()}),1e3),void(this.config.debug&&this.config.debug(e));if("pong"!==e.data)return"close"===e.data?(this.pingOn=!1,this.beforeClose&&this.beforeClose(e),void(this.config.close&&this.config.close(e))):void(this.config.success&&(e.response=JSON.parse(e.data),this.config.success(e)));this.config.debug&&this.config.debug(e)}else this.config.error&&this.config.error(e,"origin does not match")},e}();t.InsertMediaBase=n},902:function(e,t,n){var i,o=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0}),t.ImageVaultInsertMedia=void 0;var r,s=n(632),a=n(26);!function(e){e.InsertResponse=function(){};e.MediaConversion=function(){};e.PublishDetails=function(){};e.Config=function(){};var t=function(e){function t(t,n){var i=e.call(this,n)||this;i.$dom=t;var o=i.$dom[0];if(i.containerWindow=o.contentWindow,!t.is("iframe"))throw"The jQuery element must be an iframe";var r=i;return window.addEventListener("load",(function(){var e=function(e){return r.messageEvent(e)};if(window.addEventListener)window.addEventListener("message",e,!1);else{if(!window.attachEvent)throw"Cannot attachEvent/addEventListener, not supported by browser";window.attachEvent("message",(function(e){r.messageReceiver(e)}))}r.setupCallback(),r.setupComplete=!0,document.body.addEventListener("DOMNodeRemoved",(function(t){t.target==o&&window.removeEventListener&&(window.removeEventListener("message",e,!1),window.removeEventListener("message",e,!0))}),!1)})),i}return o(t,e),t.prototype.openImageVault=function(){var e=this.config;e.formatId||(e.formatId="0");var t="mediaurlbase="+encodeURIComponent(e.mediaUrlBase)+"&ensurepublishingsource="+encodeURIComponent(e.publishingSource)+(e.uiLang?"&uiLang="+encodeURIComponent(e.uiLang):"")+(e.pageLang?"&pagelang="+encodeURIComponent(e.pageLang):"")+(e.mediaUrl?"&mediaUrl="+encodeURIComponent(e.mediaUrl):"")+(e.insertMode?"&insertMode="+encodeURIComponent(e.insertMode.toString()):"")+(e.insertMultiple?"&insertmultiple="+encodeURIComponent(e.insertMultiple.toString()):"")+"&formatId="+e.formatId.toString()+(e.additionalMetadataIds?"&additionalMetadataIds="+encodeURIComponent(e.additionalMetadataIds.toString()):""),n=e.publishDetails;n&&(t+=(n.text?"&publishdetails.Text="+encodeURIComponent(n.text):"")+(n.url?"&publishdetails.Url="+encodeURIComponent(n.url):"")+(n.groupId?"&publishdetails.GroupId="+encodeURIComponent(n.groupId):"")),t+=e.mediaId?"#search="+e.mediaId+"&items="+e.mediaId:"#",this.$dom.attr("src",this.config.imageVaultUiUrl+"?"+t),this.setupComplete&&(this.postMessageCallbackReceived=!1,this.setupCallback())},t}(a.InsertMediaBase);e.InsertMedia=t}(r=t.ImageVaultInsertMedia||(t.ImageVaultInsertMedia={})),s.fn.extend({imageVaultInsertMedia:function(e){var t=this.get(0);return t.imageVaultInsertMedia?t.imageVaultInsertMedia.readConfig(e):t.imageVaultInsertMedia=new r.InsertMedia(this,e),t.imageVaultInsertMedia.openImageVault(),!0}})},632:e=>{e.exports=$}},t={};!function n(i){var o=t[i];if(void 0!==o)return o.exports;var r=t[i]={exports:{}};return e[i].call(r.exports,r,r.exports,n),r.exports}(902)})();
//# sourceMappingURL=insertmedia.min.js.map