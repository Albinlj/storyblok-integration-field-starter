(()=>{"use strict";var e={26:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.InsertMediaBase=void 0;var i=function(){function e(e){this.postMessageCallbackReceived=!1,this.pingOn=!1,this.readConfig(e)}return e.prototype.messageEvent=function(e){this.messageReceiver(e)},e.prototype.readConfig=function(e){var t=null;if(null==e.origin){var i=document.createElement("a");i.href=e.imageVaultUiUrl,e.origin=i.protocol+"//"+i.hostname,i.port&&(/http:/i.test(i.protocol)&&"80"!==i.port||/https:/i.test(i.protocol)&&"443"!==i.port)&&(e.origin+=":"+i.port)}if(e.publishingSource||(t="Publish source must be configured"),null!=t&&e.error)e.error(null,t);else if(null!=t)throw t;this.config=e},e.prototype.setupCallback=function(){var e=this;if(this.postMessageCallbackReceived)return!0;if(this.containerWindow.postMessage){try{this.containerWindow.postMessage("init",this.config.origin)}catch(e){}setTimeout((function(){e.setupCallback()}),1e3)}return!1},e.prototype.ping=function(){var e=this;if(this.pingOn){if(this.containerWindow.postMessage)try{this.containerWindow.postMessage("ping",this.config.origin)}catch(e){}setTimeout((function(){e.ping()}),1e3)}},e.prototype.messageReceiver=function(e){var t=this;if(e.origin===this.config.origin){if("initReceived"===e.data)return this.postMessageCallbackReceived=!0,this.pingOn=!0,setTimeout((function(){t.ping()}),1e3),void(this.config.debug&&this.config.debug(e));if("pong"!==e.data)return"close"===e.data?(this.pingOn=!1,this.beforeClose&&this.beforeClose(e),void(this.config.close&&this.config.close(e))):void(this.config.success&&(e.response=JSON.parse(e.data),this.config.success(e)));this.config.debug&&this.config.debug(e)}else this.config.error&&this.config.error(e,"origin does not match")},e}();t.InsertMediaBase=i},655:function(e,t,i){var o,n=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function i(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)});Object.defineProperty(t,"__esModule",{value:!0}),t.InsertMediaWindow=void 0;var s=function(e){function t(t,i){var o=e.call(this,t)||this;return o.setupComplete=!0,o.windowOptions=i,o}return n(t,e),t.prototype.openImageVault=function(){var e=this.config;e.formatId||(e.formatId="0");var t="mediaurlbase="+encodeURIComponent(e.mediaUrlBase)+"&ensurepublishingsource="+encodeURIComponent(e.publishingSource)+(e.uiLang?"&uiLang="+encodeURIComponent(e.uiLang):"")+(e.pageLang?"&pagelang="+encodeURIComponent(e.pageLang):"")+(e.mediaUrl?"&mediaUrl="+encodeURIComponent(e.mediaUrl):"")+(e.insertMode?"&insertMode="+encodeURIComponent(e.insertMode.toString()):"")+(e.insertMultiple?"&insertmultiple="+encodeURIComponent(e.insertMultiple.toString()):"")+"&formatId="+e.formatId.toString()+(e.additionalMetadataIds?"&additionalMetadataIds="+encodeURIComponent(e.additionalMetadataIds.toString()):""),i=e.publishDetails;i&&(t+=(i.text?"&publishdetails.Text="+encodeURIComponent(i.text):"")+(i.url?"&publishdetails.Url="+encodeURIComponent(i.url):"")+(i.groupId?"&publishdetails.GroupId="+encodeURIComponent(i.groupId):"")),t+=e.mediaId?"#search="+e.mediaId+"&items="+e.mediaId:"#",this.containerWindow=window.open(this.config.imageVaultUiUrl+"?"+t,"ImageVault",this.windowOptions);var o=this,n=function(e){return o.messageEvent(e)};window.addEventListener("message",n,!1),this.beforeClose=function(){o.containerWindow.close()};var s=window.setInterval((function(){o.containerWindow.closed&&(window.clearInterval(s),window.removeEventListener("message",n,!1),window.removeEventListener("message",n,!0))}),200);this.setupComplete&&(this.postMessageCallbackReceived=!1,this.setupCallback())},t}(i(26).InsertMediaBase);t.InsertMediaWindow=s,(window.ImageVault=window.ImageVault||{}).InsertMediaWindow=s}},t={};!function i(o){var n=t[o];if(void 0!==n)return n.exports;var s=t[o]={exports:{}};return e[o].call(s.exports,s,s.exports,i),s.exports}(655)})();
//# sourceMappingURL=insertmediawindow.min.js.map